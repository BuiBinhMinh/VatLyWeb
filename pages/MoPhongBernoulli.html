<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mô phỏng Nguyên lý Bernoulli</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .pipe-container {
            background: #1e293b;
            border: 2px solid #475569;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 0 4px 8px rgba(0, 0, 0, 0.3),
                0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .pipe-section {
            position: absolute;
            background: #475569;
            border: 2px solid #94a3b8;
            box-shadow: 
                inset 0 2px 4px rgba(255, 255, 255, 0.1),
                inset 0 -2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .wide-section {
            height: 120px;
            background: #475569;
        }
        
        .narrow-section {
            height: 60px;
            background: #475569;
        }
        
        .fluid-particle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #3b82f6;
            border-radius: 50%;
            border: 2px solid rgba(59, 130, 246, 0.8);
            box-shadow: 
                0 0 15px rgba(59, 130, 246, 0.8),
                0 0 30px rgba(59, 130, 246, 0.4);
            animation: particle-glow 1.5s ease-in-out infinite alternate;
            z-index: 10;
        }
        
        @keyframes particle-glow {
            0% { 
                box-shadow: 
                    0 0 8px rgba(59, 130, 246, 0.4),
                    0 0 16px rgba(59, 130, 246, 0.2);
            }
            100% { 
                box-shadow: 
                    0 0 12px rgba(59, 130, 246, 0.8),
                    0 0 24px rgba(59, 130, 246, 0.4);
            }
        }
        
        .pressure-gauge {
            position: absolute;
            width: 80px;
            height: 80px;
            background: #1f2937;
            border: 3px solid #374151;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
        }
        
        .pressure-needle {
            position: absolute;
            width: 2px;
            height: 25px;
            background: #ef4444;
            border-radius: 1px;
            transform-origin: bottom center;
            transition: transform 0.3s ease;
            box-shadow: 0 0 4px rgba(239, 68, 68, 0.6);
        }
        
        .pressure-scale {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 1px solid #6b7280;
            border-radius: 50%;
        }
        
        .pressure-scale::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            width: 1px;
            height: 8px;
            background: #9ca3af;
            transform: translateX(-50%);
        }
        
        .pressure-scale::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 50%;
            width: 1px;
            height: 8px;
            background: #9ca3af;
            transform: translateX(-50%);
        }
        
        .velocity-arrow {
            position: absolute;
            color: #10b981;
            font-size: 24px;
            animation: arrow-pulse 1.5s ease-in-out infinite;
            text-shadow: 0 0 8px rgba(16, 185, 129, 0.6);
        }
        
        @keyframes arrow-pulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.8;
            }
            50% { 
                transform: scale(1.2);
                opacity: 1;
            }
        }
        
        .flow-streamline {
            position: absolute;
            height: 2px;
            background: rgba(59, 130, 246, 0.8);
            border-radius: 1px;
            animation: streamline-flow 2s linear infinite;
        }
        
        @keyframes streamline-flow {
            0% { 
                transform: translateX(-100%);
                opacity: 0;
            }
            10% { 
                opacity: 1;
            }
            90% { 
                opacity: 1;
            }
            100% { 
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .equation-card {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .equation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2);
        }
        
        .control-slider {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #3b82f6;
            outline: none;
        }
        
        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1e40af;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .demo-button {
            background: #10b981;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .demo-button:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        
        .application-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .application-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.2);
        }
        
        .measurement-display {
            background: #1f2937;
            border: 2px solid #374151;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }
        
        .venturi-tube {
            position: relative;
            height: 200px;
            background: #475569;
            border: 3px solid #64748b;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                inset 0 4px 8px rgba(0, 0, 0, 0.3),
                0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .tube-path {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 80px;
            transform: translateY(-50%);
            background: rgba(59, 130, 246, 0.4);
            clip-path: polygon(
                0% 0%, 
                30% 0%, 
                40% var(--narrow-top, 25%), 
                60% var(--narrow-top, 25%), 
                70% 0%, 
                100% 0%, 
                100% 100%, 
                70% 100%, 
                60% var(--narrow-bottom, 75%), 
                40% var(--narrow-bottom, 75%), 
                30% 100%, 
                0% 100%
            );
            transition: clip-path 0.5s ease;
        }
        
        .manometer {
            position: absolute;
            width: 20px;
            height: 120px;
            background: #3b82f6;
            border: 2px solid #64748b;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .manometer-1 {
            top: 20px;
            left: 25%;
            --fill-height: 70%;
        }
        
        .manometer-2 {
            top: 20px;
            left: 50%;
            --fill-height: 30%;
        }
        
        .manometer-3 {
            top: 20px;
            left: 75%;
            --fill-height: 70%;
        }
        
        .info-tooltip {
            position: absolute;
            background: #111827;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .info-tooltip.show {
            opacity: 1;
        }
        
        .physics-highlight {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .back-button {
            background: #6b7280;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .back-button:hover {
            background: #4b5563;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen">
    <!-- Header -->
    <header class="glass-effect border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <!-- Title and Description -->
                <div class="text-center flex-1">
                    <div class="inline-flex items-center space-x-3 mb-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-water text-white text-xl"></i>
                        </div>
                        <h1 class="text-4xl font-bold text-white">
                            Nguyên lý Bernoulli
                        </h1>
                    </div>
                    <p class="text-gray-300 text-lg max-w-2xl mx-auto leading-relaxed">
                        Khám phá mối quan hệ giữa tốc độ dòng chảy và áp suất chất lỏng qua mô phỏng tương tác
                    </p>
                    <div class="flex justify-center space-x-6 mt-4 text-sm text-gray-400">
                        <span class="flex items-center"><i class="fas fa-flask mr-2"></i>Cơ học chất lỏng</span>
                        <span class="flex items-center"><i class="fas fa-chart-line mr-2"></i>Động lực học</span>
                        <span class="flex items-center"><i class="fas fa-cogs mr-2"></i>Ứng dụng thực tế</span>
                    </div>
                </div>
                <!-- Back Button -->
                <a href="homecourse.html" class="back-button text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i>Quay lại
                </a>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Main Simulation -->
            <div class="lg:col-span-2">
                <div class="glass-effect rounded-3xl p-8 floating-animation">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-white flex items-center">
                            <i class="fas fa-play-circle mr-3 text-blue-400"></i>
                            Mô phỏng Ống Venturi
                        </h2>
                        <div class="flex items-center space-x-2 text-sm text-gray-300">
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span>Đang chạy</span>
                        </div>
                    </div>
                    
                    <!-- Venturi Tube Simulation -->
                    <div class="venturi-tube mb-8" id="venturiTube">
                        <!-- Tube Path -->
                        <div class="tube-path"></div>
                        
                        <!-- Manometers -->
                        <div class="manometer manometer-1" id="manometer1" style="--fill-height: 70%;">
                            <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-300">
                                P₁
                            </div>
                        </div>
                        <div class="manometer manometer-2" id="manometer2" style="--fill-height: 30%;">
                            <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-300">
                                P₂
                            </div>
                        </div>
                        <div class="manometer manometer-3" id="manometer3" style="--fill-height: 70%;">
                            <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-300">
                                P₃
                            </div>
                        </div>
                        
                        <!-- Velocity Arrows -->
                        <div class="velocity-arrow" style="top: 50%; left: 20%; transform: translateY(-50%);">
                            <i class="fas fa-arrow-right"></i>
                            <div class="text-xs text-green-300 mt-1">v₁</div>
                        </div>
                        <div class="velocity-arrow" style="top: 50%; left: 50%; transform: translateY(-50%); font-size: 32px;">
                            <i class="fas fa-arrow-right"></i>
                            <div class="text-xs text-green-300 mt-1">v₂</div>
                        </div>
                        <div class="velocity-arrow" style="top: 50%; left: 80%; transform: translateY(-50%);">
                            <i class="fas fa-arrow-right"></i>
                            <div class="text-xs text-green-300 mt-1">v₃</div>
                        </div>
                        
                        <!-- Flow Streamlines -->
                        <div class="flow-streamline" style="top: 40%; left: 0; width: 100%; animation-delay: 0s;"></div>
                        <div class="flow-streamline" style="top: 50%; left: 0; width: 100%; animation-delay: 0.3s;"></div>
                        <div class="flow-streamline" style="top: 60%; left: 0; width: 100%; animation-delay: 0.6s;"></div>
                        
                        <!-- Fluid Particles -->
                        <div id="fluidParticles"></div>
                        
                        <!-- Info Tooltip -->
                        <div class="info-tooltip" id="tooltip"></div>
                    </div>
                    
                    <!-- Control Panel -->
                    <div class="glass-effect rounded-2xl p-6 mb-6">
                        <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-sliders-h mr-3 text-teal-400"></i>
                            Điều khiển Mô phỏng
                        </h3>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Flow Rate Control -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-200 mb-3 flex items-center">
                                    <i class="fas fa-tachometer-alt mr-2 text-blue-400"></i>
                                    Lưu lượng: <span id="flowRateValue" class="text-blue-300 ml-2">5.0 m/s</span>
                                </label>
                                <input type="range" id="flowRateSlider" min="1" max="10" step="0.5" value="5" class="control-slider w-full">
                                <div class="flex justify-between text-xs text-gray-400 mt-1">
                                    <span>1.0 m/s</span>
                                    <span>10.0 m/s</span>
                                </div>
                            </div>
                            
                            <!-- Tube Diameter Control -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-200 mb-3 flex items-center">
                                    <i class="fas fa-expand-arrows-alt mr-2 text-green-400"></i>
                                    Độ hẹp ống: <span id="diameterValue" class="text-green-300 ml-2">50%</span>
                                </label>
                                <input type="range" id="diameterSlider" min="20" max="80" step="5" value="50" class="control-slider w-full">
                                <div class="flex justify-between text-xs text-gray-400 mt-1">
                                    <span>20%</span>
                                    <span>80%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Demo Buttons -->
                        <div class="mt-6 flex flex-wrap gap-3">
                            <button id="demoAirplane" class="demo-button text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                <i class="fas fa-plane mr-2"></i>Demo Máy bay
                            </button>
                            <button id="demoVenturi" class="demo-button text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                <i class="fas fa-wind mr-2"></i>Demo Venturi
                            </button>
                            <button id="demoPitot" class="demo-button text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                <i class="fas fa-tachometer-alt mr-2"></i>Demo Pitot
                            </button>
                            <button id="resetDemo" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center">
                                <i class="fas fa-redo mr-2"></i>Đặt lại
                            </button>
                        </div>
                    </div>
                    
                    <!-- Measurements Display -->
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="measurement-display rounded-xl p-4 text-center">
                            <div class="text-green-400 text-2xl font-bold" id="velocity1">5.0 m/s</div>
                            <div class="text-gray-300 text-sm">Vận tốc v₁</div>
                            <div class="text-blue-400 text-lg font-semibold" id="pressure1">101.3 kPa</div>
                            <div class="text-gray-400 text-xs">Áp suất P₁</div>
                        </div>
                        <div class="measurement-display rounded-xl p-4 text-center">
                            <div class="text-green-400 text-2xl font-bold" id="velocity2">20.0 m/s</div>
                            <div class="text-gray-300 text-sm">Vận tốc v₂</div>
                            <div class="text-blue-400 text-lg font-semibold" id="pressure2">-86.2 kPa</div>
                            <div class="text-gray-400 text-xs">Áp suất P₂</div>
                        </div>
                        <div class="measurement-display rounded-xl p-4 text-center">
                            <div class="text-green-400 text-2xl font-bold" id="velocity3">5.0 m/s</div>
                            <div class="text-gray-300 text-sm">Vận tốc v₃</div>
                            <div class="text-blue-400 text-lg font-semibold" id="pressure3">101.3 kPa</div>
                            <div class="text-gray-400 text-xs">Áp suất P₃</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Information Panel -->
            <div class="space-y-6">
                <!-- Bernoulli Equation -->
                <div class="equation-card rounded-2xl p-6 floating-animation">
                    <h3 class="text-xl font-bold text-blue-300 mb-4 flex items-center">
                        <i class="fas fa-calculator mr-3"></i>
                        Phương trình Bernoulli
                    </h3>
                    
                    <div class="text-center mb-6">
                        <div class="bg-gray-800 rounded-lg p-4 text-2xl font-mono text-white">
                            P + ½ρv² + ρgh = const
                        </div>
                    </div>
                    
                    <div class="space-y-3 text-sm text-gray-200">
                        <div class="flex items-center">
                            <span class="w-8 text-blue-300 font-semibold">P:</span>
                            <span>Áp suất tĩnh</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-8 text-green-300 font-semibold">½ρv²:</span>
                            <span>Áp suất động</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-8 text-purple-300 font-semibold">ρgh:</span>
                            <span>Áp suất thế năng</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-8 text-yellow-300 font-semibold">ρ:</span>
                            <span>Mật độ chất lỏng</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-blue-800 rounded-lg">
                        <div class="text-blue-300 font-semibold text-sm mb-1">Nguyên lý cơ bản:</div>
                        <div class="text-gray-200 text-xs">
                            Khi vận tốc tăng, áp suất giảm và ngược lại (với cùng độ cao)
                        </div>
                    </div>
                </div>
                
                <!-- Key Insights -->
                <div class="physics-highlight rounded-2xl p-6 floating-animation">
                    <h3 class="text-xl font-bold text-green-300 mb-4 flex items-center">
                        <i class="fas fa-lightbulb mr-3"></i>
                        Hiểu biết Chính
                    </h3>
                    
                    <div class="space-y-4 text-sm">
                        <div class="bg-gray-800 rounded-lg p-3">
                            <div class="text-green-300 font-semibold mb-1 flex items-center">
                                <i class="fas fa-arrow-up mr-2"></i>Vận tốc ↑
                            </div>
                            <div class="text-gray-200 text-xs">Khi chất lỏng chảy qua vùng hẹp, vận tốc tăng</div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-lg p-3">
                            <div class="text-red-300 font-semibold mb-1 flex items-center">
                                <i class="fas fa-arrow-down mr-2"></i>Áp suất ↓
                            </div>
                            <div class="text-gray-200 text-xs">Áp suất giảm khi vận tốc tăng (bảo toàn năng lượng)</div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-lg p-3">
                            <div class="text-blue-300 font-semibold mb-1 flex items-center">
                                <i class="fas fa-balance-scale mr-2"></i>Bảo toàn
                            </div>
                            <div class="text-gray-200 text-xs">Tổng năng lượng (áp suất + động năng) không đổi</div>
                        </div>
                    </div>
                </div>
                
                <!-- Current Measurements -->
                <div class="glass-effect rounded-2xl p-6 floating-animation">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-chart-bar mr-3 text-teal-400"></i>
                        Đo lường Hiện tại
                    </h3>
                    
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-300">Lưu lượng:</span>
                            <span id="currentFlowRate" class="text-blue-300 font-medium">5.0 m/s</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Độ hẹp ống:</span>
                            <span id="currentDiameter" class="text-green-300 font-medium">50%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Tỷ lệ v₂/v₁:</span>
                            <span id="velocityRatio" class="text-yellow-300 font-medium">4.0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Chênh lệch áp suất:</span>
                            <span id="pressureDiff" class="text-red-300 font-medium">187.5 kPa</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-teal-800 rounded-lg">
                        <div class="text-teal-300 font-semibold text-sm mb-1">Trạng thái:</div>
                        <div id="flowStatus" class="text-gray-200 text-xs">Dòng chảy nhanh - Chênh lệch áp suất lớn</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Applications Section -->
        <div class="mt-12 glass-effect rounded-3xl p-10 floating-animation">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-white mb-4 flex items-center justify-center">
                    <i class="fas fa-cogs mr-4 text-4xl"></i>
                    Ứng dụng Thực tế
                </h2>
                <p class="text-gray-300 text-lg max-w-3xl mx-auto">
                    Nguyên lý Bernoulli được ứng dụng rộng rãi trong nhiều lĩnh vực của đời sống và kỹ thuật
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Airplane Wing -->
                <div class="application-card rounded-2xl p-6">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-plane text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-blue-300">Cánh Máy bay</h3>
                    </div>
                    
                    <div class="text-gray-200 text-sm leading-relaxed">
                        <p class="mb-3">
                            Không khí chảy nhanh hơn trên mặt trên cánh, tạo áp suất thấp hơn và lực nâng.
                        </p>
                        <div class="bg-gray-800 rounded-lg p-2">
                            <div class="text-blue-300 font-semibold text-xs">Nguyên lý:</div>
                            <div class="text-xs">v↑ → P↓ → Lực nâng</div>
                        </div>
                    </div>
                </div>
                
                <!-- Venturi Meter -->
                <div class="application-card rounded-2xl p-6">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-tachometer-alt text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-300">Đồng hồ Venturi</h3>
                    </div>
                    
                    <div class="text-gray-200 text-sm leading-relaxed">
                        <p class="mb-3">
                            Đo lưu lượng chất lỏng bằng cách đo chênh lệch áp suất qua ống hẹp.
                        </p>
                        <div class="bg-gray-800 rounded-lg p-2">
                            <div class="text-green-300 font-semibold text-xs">Ứng dụng:</div>
                            <div class="text-xs">Đo lưu lượng nước, khí</div>
                        </div>
                    </div>
                </div>
                
                <!-- Pitot Tube -->
                <div class="application-card rounded-2xl p-6">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-wind text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-purple-300">Ống Pitot</h3>
                    </div>
                    
                    <div class="text-gray-200 text-sm leading-relaxed">
                        <p class="mb-3">
                            Đo tốc độ bay của máy bay bằng cách so sánh áp suất tĩnh và áp suất toàn phần.
                        </p>
                        <div class="bg-gray-800 rounded-lg p-2">
                            <div class="text-purple-300 font-semibold text-xs">Sử dụng:</div>
                            <div class="text-xs">Hàng không, khí tượng</div>
                        </div>
                    </div>
                </div>
                
                <!-- Carburetor -->
                <div class="application-card rounded-2xl p-6">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-car text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-orange-300">Bộ chế hòa khí</h3>
                    </div>
                    
                    <div class="text-gray-200 text-sm leading-relaxed">
                        <p class="mb-3">
                            Không khí chảy nhanh qua ống hẹp tạo áp suất thấp, hút nhiên liệu vào.
                        </p>
                        <div class="bg-gray-800 rounded-lg p-2">
                            <div class="text-orange-300 font-semibold text-xs">Chức năng:</div>
                            <div class="text-xs">Trộn không khí - nhiên liệu</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Theory Section -->
        <div class="mt-8 grid md:grid-cols-2 gap-8">
            <!-- Derivation -->
            <div class="equation-card rounded-3xl p-8 floating-animation">
                <h2 class="text-2xl font-bold text-blue-300 mb-6 flex items-center">
                    <i class="fas fa-graduation-cap mr-3"></i>
                    Suy diễn Phương trình
                </h2>
                
                <div class="space-y-4 text-sm text-gray-200">
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="text-blue-300 font-semibold mb-2">1. Bảo toàn năng lượng:</div>
                        <div class="font-mono text-center bg-gray-900 rounded p-2">
                            E = P + ½ρv² + ρgh
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="text-green-300 font-semibold mb-2">2. Dọc theo dòng chảy:</div>
                        <div class="font-mono text-center bg-gray-900 rounded p-2">
                            E₁ = E₂ = E₃ = const
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="text-purple-300 font-semibold mb-2">3. Cùng độ cao (h₁ = h₂):</div>
                        <div class="font-mono text-center bg-gray-900 rounded p-2">
                            P₁ + ½ρv₁² = P₂ + ½ρv₂²
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="text-yellow-300 font-semibold mb-2">4. Phương trình liên tục:</div>
                        <div class="font-mono text-center bg-gray-900 rounded p-2">
                            A₁v₁ = A₂v₂
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Assumptions -->
            <div class="physics-highlight rounded-3xl p-8 floating-animation">
                <h2 class="text-2xl font-bold text-green-300 mb-6 flex items-center">
                    <i class="fas fa-list-check mr-3"></i>
                    Điều kiện Áp dụng
                </h2>
                
                <div class="space-y-4 text-sm text-gray-200">
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-green-300">Chất lỏng không nén được</div>
                            <div class="text-xs text-gray-400">Mật độ ρ không đổi</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-green-300">Dòng chảy ổn định</div>
                            <div class="text-xs text-gray-400">Vận tốc không thay đổi theo thời gian</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-green-300">Không có ma sát</div>
                            <div class="text-xs text-gray-400">Chất lỏng lý tưởng</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-green-300">Dòng chảy dọc theo đường dòng</div>
                            <div class="text-xs text-gray-400">Không có xoáy, rối</div>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-yellow-800 rounded-lg border border-yellow-500/30">
                        <div class="text-yellow-300 font-semibold text-sm mb-2 flex items-center">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            Lưu ý quan trọng:
                        </div>
                        <div class="text-xs text-gray-200">
                            Trong thực tế, luôn có ma sát và các hiệu ứng khác. Phương trình Bernoulli là xấp xỉ tốt cho nhiều ứng dụng.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class BernoulliSimulation {
            constructor() {
                this.flowRate = 5.0; // m/s
                this.diameter = 50; // percentage
                this.isRunning = true;
                this.particles = [];
                this.animationId = null;
                
                // Physical constants
                this.density = 1000; // kg/m³ (water)
                this.basePressure = 101300; // Pa
                
                this.initializeElements();
                this.setupEventListeners();
                this.startSimulation();
                this.updateCalculations();
            }
            
            initializeElements() {
                this.venturiTube = document.getElementById('venturiTube');
                this.flowRateSlider = document.getElementById('flowRateSlider');
                this.diameterSlider = document.getElementById('diameterSlider');
                this.fluidParticles = document.getElementById('fluidParticles');
                this.tooltip = document.getElementById('tooltip');
                
                // Manometers
                this.manometer1 = document.getElementById('manometer1');
                this.manometer2 = document.getElementById('manometer2');
                this.manometer3 = document.getElementById('manometer3');
                
                // Demo buttons
                this.demoAirplane = document.getElementById('demoAirplane');
                this.demoVenturi = document.getElementById('demoVenturi');
                this.demoPitot = document.getElementById('demoPitot');
                this.resetDemo = document.getElementById('resetDemo');
            }
            
            setupEventListeners() {
                // Flow rate control
                this.flowRateSlider.addEventListener('input', (e) => {
                    this.flowRate = parseFloat(e.target.value);
                    document.getElementById('flowRateValue').textContent = this.flowRate.toFixed(1) + ' m/s';
                    document.getElementById('currentFlowRate').textContent = this.flowRate.toFixed(1) + ' m/s';
                    this.updateCalculations();
                    this.updateAnimationSpeed();
                });
                
                // Diameter control
                this.diameterSlider.addEventListener('input', (e) => {
                    this.diameter = parseInt(e.target.value);
                    document.getElementById('diameterValue').textContent = this.diameter + '%';
                    document.getElementById('currentDiameter').textContent = this.diameter + '%';
                    this.updateTubeGeometry();
                    this.updateCalculations();
                });
                
                // Demo buttons
                this.demoAirplane.addEventListener('click', () => this.runAirplaneDemo());
                this.demoVenturi.addEventListener('click', () => this.runVenturiDemo());
                this.demoPitot.addEventListener('click', () => this.runPitotDemo());
                this.resetDemo.addEventListener('click', () => this.resetSimulation());
                
                // Hover effects for tooltips
                this.setupTooltips();
            }
            
            setupTooltips() {
                const elements = [
                    { element: this.manometer1, text: 'Áp suất tại vùng rộng (P₁)' },
                    { element: this.manometer2, text: 'Áp suất tại vùng hẹp (P₂) - Thấp nhất' },
                    { element: this.manometer3, text: 'Áp suất tại vùng rộng (P₃)' }
                ];
                
                elements.forEach(({ element, text }) => {
                    element.addEventListener('mouseenter', (e) => {
                        this.showTooltip(e, text);
                    });
                    
                    element.addEventListener('mouseleave', () => {
                        this.hideTooltip();
                    });
                });
            }
            
            showTooltip(event, text) {
                this.tooltip.textContent = text;
                this.tooltip.classList.add('show');
                
                const rect = event.target.getBoundingClientRect();
                const containerRect = this.venturiTube.getBoundingClientRect();
                
                this.tooltip.style.left = (rect.left - containerRect.left + rect.width/2) + 'px';
                this.tooltip.style.top = (rect.top - containerRect.top - 30) + 'px';
            }
            
            hideTooltip() {
                this.tooltip.classList.remove('show');
            }
            
            updateTubeGeometry() {
                // Update the clip-path of tube-path based on diameter
                const tubePath = document.querySelector('.tube-path');
                const narrowPercent = this.diameter;
                
                // Calculate the narrow section dimensions
                const narrowTop = 50 - (narrowPercent * 0.3); // More dramatic narrowing
                const narrowBottom = 50 + (narrowPercent * 0.3);
                
                // Update CSS custom properties
                tubePath.style.setProperty('--narrow-top', narrowTop + '%');
                tubePath.style.setProperty('--narrow-bottom', narrowBottom + '%');
                
                console.log(`Updating tube geometry: diameter=${this.diameter}%, narrowTop=${narrowTop}%, narrowBottom=${narrowBottom}%`);
            }
            
            updateCalculations() {
                // Calculate velocities using continuity equation
                // A₁v₁ = A₂v₂, assuming A₁ = A₃
                const areaRatio = (100 / this.diameter) ** 2; // A₁/A₂
                
                const v1 = this.flowRate;
                const v2 = v1 * areaRatio;
                const v3 = v1; // Same as v1 due to same cross-section
                
                // Calculate pressures using Bernoulli equation
                // P₁ + ½ρv₁² = P₂ + ½ρv₂²
                const p1 = this.basePressure;
                const p2 = p1 + 0.5 * this.density * (v1*v1 - v2*v2);
                const p3 = p1; // Same as p1
                
                // Update displays
                document.getElementById('velocity1').textContent = v1.toFixed(1) + ' m/s';
                document.getElementById('velocity2').textContent = v2.toFixed(1) + ' m/s';
                document.getElementById('velocity3').textContent = v3.toFixed(1) + ' m/s';
                
                document.getElementById('pressure1').textContent = (p1/1000).toFixed(1) + ' kPa';
                document.getElementById('pressure2').textContent = (p2/1000).toFixed(1) + ' kPa';
                document.getElementById('pressure3').textContent = (p3/1000).toFixed(1) + ' kPa';
                
                // Update derived values
                document.getElementById('velocityRatio').textContent = (v2/v1).toFixed(1);
                document.getElementById('pressureDiff').textContent = ((p1-p2)/1000).toFixed(1) + ' kPa';
                
                // Update manometer heights
                this.updateManometers(p1, p2, p3);
                
                // Update flow status
                this.updateFlowStatus(v2/v1, (p1-p2)/1000);
            }
            
            updateManometers(p1, p2, p3) {
                // Convert pressures to heights (relative)
                const maxPressure = Math.max(p1, p2, p3);
                const minPressure = Math.min(p1, p2, p3);
                const pressureRange = maxPressure - minPressure;
                
                if (pressureRange > 0) {
                    const h1 = 30 + 40 * (p1 - minPressure) / pressureRange;
                    const h2 = 30 + 40 * (p2 - minPressure) / pressureRange;
                    const h3 = 30 + 40 * (p3 - minPressure) / pressureRange;
                    
                    this.manometer1.style.setProperty('--fill-height', h1 + '%');
                    this.manometer2.style.setProperty('--fill-height', h2 + '%');
                    this.manometer3.style.setProperty('--fill-height', h3 + '%');
                } else {
                    // All pressures equal
                    this.manometer1.style.setProperty('--fill-height', '50%');
                    this.manometer2.style.setProperty('--fill-height', '50%');
                    this.manometer3.style.setProperty('--fill-height', '50%');
                }
            }
            
            updateFlowStatus(velocityRatio, pressureDiff) {
                let status = '';
                
                if (velocityRatio > 3) {
                    status = 'Dòng chảy nhanh - Chênh lệch áp suất lớn';
                } else if (velocityRatio > 2) {
                    status = 'Dòng chảy trung bình - Nguyên lý Bernoulli rõ ràng';
                } else if (velocityRatio > 1.5) {
                    status = 'Dòng chảy chậm - Hiệu ứng Bernoulli nhẹ';
                } else {
                    status = 'Dòng chảy đều - Áp suất gần như không đổi';
                }
                
                document.getElementById('flowStatus').textContent = status;
            }
            
            updateAnimationSpeed() {
                // Update streamline animation speed
                const streamlines = document.querySelectorAll('.flow-streamline');
                const baseSpeed = 2; // seconds
                const newSpeed = baseSpeed / (this.flowRate / 5); // Normalize to base flow rate
                
                streamlines.forEach(streamline => {
                    streamline.style.animationDuration = newSpeed + 's';
                });
                
                // Update velocity arrow pulse speed
                const arrows = document.querySelectorAll('.velocity-arrow');
                arrows.forEach((arrow, index) => {
                    const velocityMultiplier = index === 1 ? (this.diameter/100) : 1; // Middle arrow faster
                    const pulseSpeed = 1.5 / (velocityMultiplier * this.flowRate / 5);
                    arrow.style.animationDuration = pulseSpeed + 's';
                });
            }
            
            createParticle() {
                const particle = document.createElement('div');
                particle.className = 'fluid-particle';
                
                // Start position - center of tube
                particle.style.left = '-15px';
                particle.style.top = (95 + Math.random() * 10) + 'px'; // Random height in tube center
                
                this.fluidParticles.appendChild(particle);
                this.particles.push(particle);
                
                // Animate particle
                this.animateParticle(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    this.particles = this.particles.filter(p => p !== particle);
                }, 5000);
            }
            
            animateParticle(particle) {
                let position = -15;
                const tubeWidth = this.venturiTube.offsetWidth;
                let currentSpeed = this.flowRate * 8; // Base speed
                
                const animate = () => {
                    if (!particle.parentNode) return;
                    
                    // Calculate progress through tube
                    const progress = position / tubeWidth;
                    
                    // Speed up in narrow section (Bernoulli effect)
                    if (progress >= 0.35 && progress <= 0.65) {
                        // In narrow section - speed increases
                        const areaRatio = (100 / this.diameter) ** 2;
                        currentSpeed = this.flowRate * 8 * Math.sqrt(areaRatio);
                    } else {
                        // In wide sections - normal speed
                        currentSpeed = this.flowRate * 8;
                    }
                    
                    position += currentSpeed * 0.5; // Smooth movement
                    
                    // Calculate vertical position following tube shape
                    let verticalPosition = 100; // Base center line
                    
                    if (progress >= 0.3 && progress <= 0.7) {
                        // Following the tube narrowing
                        const narrowProgress = (progress - 0.3) / 0.4;
                        const narrowTop = 50 - (this.diameter * 0.3);
                        const narrowRange = (100 - narrowTop * 2);
                        
                        // Smooth transition into and out of narrow section
                        if (narrowProgress <= 0.2) {
                            // Entering narrow section
                            const t = narrowProgress / 0.2;
                            verticalPosition = 100 - (20 * t * (100 - this.diameter) / 100);
                        } else if (narrowProgress >= 0.8) {
                            // Exiting narrow section
                            const t = (narrowProgress - 0.8) / 0.2;
                            verticalPosition = 100 - (20 * (1-t) * (100 - this.diameter) / 100);
                        } else {
                            // In narrow section
                            verticalPosition = 100 - (20 * (100 - this.diameter) / 100);
                        }
                    }
                    
                    // Add slight random movement
                    verticalPosition += Math.sin(position * 0.03) * 3;
                    
                    particle.style.left = position + 'px';
                    particle.style.top = verticalPosition + 'px';
                    
                    // Scale particle based on speed (visual effect)
                    const scale = 0.8 + (currentSpeed / (this.flowRate * 16));
                    particle.style.transform = `scale(${scale})`;
                    
                    if (position < tubeWidth + 30) {
                        requestAnimationFrame(animate);
                    }
                };
                
                animate();
            }
            
            startSimulation() {
                // Create particles periodically
                const createParticles = () => {
                    if (this.isRunning && this.particles.length < 15) {
                        this.createParticle();
                    }
                    // Adjust particle creation rate based on flow rate
                    const interval = Math.max(100, 500 / this.flowRate);
                    setTimeout(createParticles, interval);
                };
                
                createParticles();
                
                // Also create initial batch of particles
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => this.createParticle(), i * 200);
                }
            }
            
            runAirplaneDemo() {
                // Simulate airplane wing conditions
                this.flowRateSlider.value = 8;
                this.diameterSlider.value = 25;
                this.flowRate = 8;
                this.diameter = 25;
                
                document.getElementById('flowRateValue').textContent = '8.0 m/s';
                document.getElementById('diameterValue').textContent = '25%';
                document.getElementById('currentFlowRate').textContent = '8.0 m/s';
                document.getElementById('currentDiameter').textContent = '25%';
                
                this.updateTubeGeometry();
                this.updateCalculations();
                this.updateAnimationSpeed();
                
                // Add wing shape visualization
                this.addWingVisualization();
                
                // Show explanation
                this.showDemoExplanation('Cánh máy bay', 'Không khí chảy nhanh hơn trên mặt trên cánh (vùng hẹp), tạo áp suất thấp và lực nâng. Quan sát các hạt chất lỏng tăng tốc qua vùng hẹp!');
            }
            
            runVenturiDemo() {
                // Simulate venturi meter conditions
                this.flowRateSlider.value = 6;
                this.diameterSlider.value = 40;
                this.flowRate = 6;
                this.diameter = 40;
                
                document.getElementById('flowRateValue').textContent = '6.0 m/s';
                document.getElementById('diameterValue').textContent = '40%';
                document.getElementById('currentFlowRate').textContent = '6.0 m/s';
                document.getElementById('currentDiameter').textContent = '40%';
                
                this.updateTubeGeometry();
                this.updateCalculations();
                this.updateAnimationSpeed();
                
                this.showDemoExplanation('Đồng hồ Venturi', 'Đo lưu lượng bằng cách đo chênh lệch áp suất giữa vùng rộng và vùng hẹp.');
            }
            
            runPitotDemo() {
                // Simulate pitot tube conditions
                this.flowRateSlider.value = 9;
                this.diameterSlider.value = 25;
                this.flowRate = 9;
                this.diameter = 25;
                
                document.getElementById('flowRateValue').textContent = '9.0 m/s';
                document.getElementById('diameterValue').textContent = '25%';
                document.getElementById('currentFlowRate').textContent = '9.0 m/s';
                document.getElementById('currentDiameter').textContent = '25%';
                
                this.updateTubeGeometry();
                this.updateCalculations();
                this.updateAnimationSpeed();
                
                this.showDemoExplanation('Ống Pitot', 'Đo tốc độ bay bằng cách so sánh áp suất tĩnh và áp suất toàn phần.');
            }
            
            showDemoExplanation(title, explanation) {
                // Create temporary notification
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm';
                notification.innerHTML = `
                    <div class="font-semibold mb-2">${title}</div>
                    <div class="text-sm">${explanation}</div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
            
            addWingVisualization() {
                // Remove existing wing if any
                const existingWing = document.querySelector('.wing-overlay');
                if (existingWing) {
                    existingWing.remove();
                }
                
                // Add wing shape overlay
                const wingOverlay = document.createElement('div');
                wingOverlay.className = 'wing-overlay';
                wingOverlay.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 35%;
                    width: 30%;
                    height: 60px;
                    transform: translateY(-50%);
                    background: rgba(156, 163, 175, 0.3);
                    border: 2px solid rgba(156, 163, 175, 0.6);
                    border-radius: 50px 10px 10px 50px;
                    z-index: 5;
                    pointer-events: none;
                `;
                
                this.venturiTube.appendChild(wingOverlay);
                
                // Remove after 5 seconds
                setTimeout(() => {
                    if (wingOverlay.parentNode) {
                        wingOverlay.remove();
                    }
                }, 5000);
            }
            
            resetSimulation() {
                // Reset to default values
                this.flowRateSlider.value = 5;
                this.diameterSlider.value = 50;
                this.flowRate = 5;
                this.diameter = 50;
                
                document.getElementById('flowRateValue').textContent = '5.0 m/s';
                document.getElementById('diameterValue').textContent = '50%';
                document.getElementById('currentFlowRate').textContent = '5.0 m/s';
                document.getElementById('currentDiameter').textContent = '50%';
                
                this.updateTubeGeometry();
                this.updateCalculations();
                this.updateAnimationSpeed();
                
                // Remove wing overlay if exists
                const wingOverlay = document.querySelector('.wing-overlay');
                if (wingOverlay) {
                    wingOverlay.remove();
                }
                
                // Clear all particles
                this.particles.forEach(particle => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                });
                this.particles = [];
            }
        }
        
        // Initialize simulation when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new BernoulliSimulation();
        });
    </script>
</body>
</html>